/* ---------------------------------------------------------------------------
** I attest that this following code represents my own work and is subject to
** the plagiarism policy found in the course syllabus.
**
** Class: 	CSC 242
** Assignment: 	Assignment 5: Comprehensive Program Challenge
** File: 	P8_2.cpp
** Description: Write a program that checks the spelling of all words in a file against a dictionary file.
**
** Author: 	Mariana Hernandez, Damien Roseberry, and Karlos Grajeda
** Date: 	2025-09-23
** -------------------------------------------------------------------------*/

#include <iostream>
#include <vector>
#include <fstream>
#include <string>
#include <cctype> // to be able to use tolower built in function
#include <unordered_set>
#include <set>

using namespace std;

string checkUpper(const string& word) {
	string checkedWord;

	for (size_t i = 0; i < word.size(); i++) {
		unsigned char c = word[i];            // get each character
		if (isalpha(c)) {                     // only keep letters
			checkedWord.push_back(tolower(c));// convert to lowercase
		}
	}

	return checkedWord;
}

//Mariana Hernandez load dictionary file into memory
vector<string> loadDictionary(const string& path) {

	ifstream file_reader(path);		// Open dictionary file
	vector<string> words;		    // vector string named words
	string word;				    // place holder for each word

	while (file_reader >> word) {   // loop that keeps reading words until the file ends.
		words.push_back(word);	    // store each word into vector
	}

	file_reader.close();	        // close file

	return words;

}

// Damien Roseberry load words from document to be checked
vector<string> loadDocumentWords(const string& path) {

	ifstream file_reader(path);     // Open input file (the document we are checking)
	vector<string> documentWords;   // Vector to hold all words from the document
	string word;                    // Placeholder for each word

	while (file_reader >> word) {
		documentWords.push_back(word); // Store each word into vector
	}

	file_reader.close();            // Close file

	return documentWords;
}

// Karlos Grajeda compare document words with dictionary
void checkSpelling(const vector<string>& dict, const vector<string>& doc) {
    unordered_set<string> dictSet; 

    // normalize dictionary words
    for (const string& w : dict) {
        string cleanWord = checkUpper(w);
        if (!cleanWord.empty()) {
            dictSet.insert(cleanWord);
        }
    }

    set<string> misspellings; // store unique misspelled words

    for (const string& w : doc) {
        string cleanWord = checkUpper(w);  // clean document word
        if (!cleanWord.empty() && dictSet.find(cleanWord) == dictSet.end()) {
            misspellings.insert(w);        // store original for display
        }
    }

    // Output results
    if (misspellings.empty()) {
        cout << "None found." << endl;
    } else {
        for (const auto& word : misspellings) {
            cout << word << endl;
        }
    }
}

int main() {
	// Step 1: Load dictionary words
	vector<string> dictionary = loadDictionary("dictionary.txt");
	cout << "Loaded " << dictionary.size() << " words from dictionary." << endl;

	// Step 2: Load document words
	vector<string> document = loadDocumentWords("document.txt");
	cout << "Loaded " << document.size() << " words from document." << endl;

	// Step 3: Spell check
	cout << "\nMisspelled words:\n";
	checkSpelling(dictionary, document);

	return 0;
}
